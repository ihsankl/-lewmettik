{"version":3,"file":"json.js","names":["json","request","response","next","body","method","disallowedHttpHeaders","is","includes","Boom","badRequest"],"sources":["../../src/middlewares/json.js"],"sourcesContent":["import Boom from '@hapi/boom';\nimport _isEmpty from 'lodash/isEmpty';\n\n/**\n * Middleware to handle empty JSON body requests and other edge cases if any.\n *\n * @param  {Object}   request\n * @param  {Object}   response\n * @param  {Function} next\n */\nexport default function json(request, response, next) {\n  const { body, method } = request;\n  const disallowedHttpHeaders = ['PUT', 'POST', 'PATCH'];\n\n  if (request.is('application/json') && disallowedHttpHeaders.includes(method) && _isEmpty(body)) {\n    throw Boom.badRequest('Empty JSON');\n  }\n\n  next();\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,IAAT,CAAcC,OAAd,EAAuBC,QAAvB,EAAiCC,IAAjC,EAAuC;EACpD,MAAM;IAAEC,IAAF;IAAQC;EAAR,IAAmBJ,OAAzB;EACA,MAAMK,qBAAqB,GAAG,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB,CAA9B;;EAEA,IAAIL,OAAO,CAACM,EAAR,CAAW,kBAAX,KAAkCD,qBAAqB,CAACE,QAAtB,CAA+BH,MAA/B,CAAlC,IAA4E,uBAASD,IAAT,CAAhF,EAAgG;IAC9F,MAAMK,cAAKC,UAAL,CAAgB,YAAhB,CAAN;EACD;;EAEDP,IAAI;AACL"}