{"version":3,"file":"buildError.js","names":["buildError","err","isJoi","code","HttpStatus","BAD_REQUEST","message","getStatusText","details","map","param","path","join","isBoom","output","statusCode","payload","error","INTERNAL_SERVER_ERROR"],"sources":["../../src/utils/buildError.js"],"sourcesContent":["import HttpStatus from 'http-status-codes';\n\n/**\n * Build error response for validation errors.\n *\n * @param   {Error} err\n * @returns {Object}\n */\nfunction buildError(err) {\n  // Validation errors\n  if (err.isJoi) {\n    return {\n      code: HttpStatus.BAD_REQUEST,\n      message: HttpStatus.getStatusText(HttpStatus.BAD_REQUEST),\n      details:\n        err.details &&\n        err.details.map(err => {\n          return {\n            message: err.message,\n            param: err.path.join('.')\n          };\n        })\n    };\n  }\n\n  // HTTP errors\n  if (err.isBoom) {\n    return {\n      code: err.output.statusCode,\n      message: err.output.payload.message || err.output.payload.error\n    };\n  }\n\n  // Return INTERNAL_SERVER_ERROR for all other cases\n  return {\n    code: HttpStatus.INTERNAL_SERVER_ERROR,\n    message: HttpStatus.getStatusText(HttpStatus.INTERNAL_SERVER_ERROR)\n  };\n}\n\nexport default buildError;\n"],"mappings":";;;;;;;AAAA;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,UAAT,CAAoBC,GAApB,EAAyB;EACvB;EACA,IAAIA,GAAG,CAACC,KAAR,EAAe;IACb,OAAO;MACLC,IAAI,EAAEC,yBAAWC,WADZ;MAELC,OAAO,EAAEF,yBAAWG,aAAX,CAAyBH,yBAAWC,WAApC,CAFJ;MAGLG,OAAO,EACLP,GAAG,CAACO,OAAJ,IACAP,GAAG,CAACO,OAAJ,CAAYC,GAAZ,CAAgBR,GAAG,IAAI;QACrB,OAAO;UACLK,OAAO,EAAEL,GAAG,CAACK,OADR;UAELI,KAAK,EAAET,GAAG,CAACU,IAAJ,CAASC,IAAT,CAAc,GAAd;QAFF,CAAP;MAID,CALD;IALG,CAAP;EAYD,CAfsB,CAiBvB;;;EACA,IAAIX,GAAG,CAACY,MAAR,EAAgB;IACd,OAAO;MACLV,IAAI,EAAEF,GAAG,CAACa,MAAJ,CAAWC,UADZ;MAELT,OAAO,EAAEL,GAAG,CAACa,MAAJ,CAAWE,OAAX,CAAmBV,OAAnB,IAA8BL,GAAG,CAACa,MAAJ,CAAWE,OAAX,CAAmBC;IAFrD,CAAP;EAID,CAvBsB,CAyBvB;;;EACA,OAAO;IACLd,IAAI,EAAEC,yBAAWc,qBADZ;IAELZ,OAAO,EAAEF,yBAAWG,aAAX,CAAyBH,yBAAWc,qBAApC;EAFJ,CAAP;AAID;;eAEclB,U"}